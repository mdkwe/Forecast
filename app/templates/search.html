{% extends "layout.html" %}

{% block navigation %}

{% endblock %}
<span class="icon has-text-black">
  <i class="fa-solid fa-wind"></i>
</span>
{% block content %}

<section class="hero is-link">
  <div class="hero-body">
    <div class="column is-flex is-justify-content-center is-align-content-center">
      <form action="{{ url_for('search') }}" method="post">
        <div class="field is-grouped">
          <div class="control is-expanded">
            <input class="input" type="text" name="city" id="city" placeholder="Enter city name">
          </div>
          <div class="control">
            <button type="submit" class="button is-warning">Search</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="tabs is-boxed is-centered">
    <ul>
      <li id="weather-tab" class="is-active">
        <a onClick="switchToWeather()">
          <span class="icon is-small"><i class="fa fa-wind"></i></span>
          <span>Weather</span>
        </a>
      </li>
      <li id="settings-tab">
        <a onClick="switchToSettings()">
          <span class="icon is-small"><i class="fa fa-gear"></i></span>
          <span>Settings</span>
        </a>
      </li>
    </ul>
  </div>
</section>

<div class="container">

  <!-- Weather view -->
  <div id="weather-tab-content">

    <div class="container">

      <section class="hero is-small">
        <div class="hero-body">
          <div class="columnn is-flex is-justify-content-center is-align-content-center">
            <div class="column">
              <div class="columns has-background-link-dark has-text-white has-text-weight-bold">
                <div class="column is-flex is-justify-content-right">
                  <div class="column is-three-fifths">
                    <div class="columns has-text-centered">
                      <div class="column div-text-small"><span class="icon is-small"><i
                            class="fa fa-location-dot"></i></span>
                        <span>{{location.name[0]}}, {{location.name[2]}}</span>
                      </div>
                      <div class="column div-text-small"><span class="icon is-small"><i
                            class="fa fa-calendar-days"></i></span>
                        <span>{{ data['current']['dt'] | format_datetime(data["timezone"], 'date')}}</span>
                      </div>
                      <div class="column div-text-small"><span class="icon is-small"><i class="fa fa-clock"></i></span>
                        <span>{{ data['current']['dt'] | format_datetime(data["timezone"], 'hour') }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <section class="hero is-small">
                <div class="column">
                  <div class="columns mt-3">
                    <div class="column is-half has-text-right border-day">
                      <div class="m-auto div-text"> <p>{{data['current']['temp']|round }}°C</p></div>
                      
                    </div>
                    <div class="column is-flex is-align-items-end">
                      <div class="is-justify-content-center">
                        <p class="div-text-small">Precipitation :<i
                            style="margin-inline-end: 10px;"></i></span>{{data["hourly"][0]["pop"]* 100 |round(1) }}%
                        </p>
                        <p class="div-text-small">Humidity :<i
                            style="margin-inline-end: 10px;"></i></span>{{data["hourly"][0]["humidity"] |round(1) }}%
                        </p>
                        <p class="div-text-small">Wind : <i
                            style="margin-inline-end: 10px;"></i></span>{{data["hourly"][0]["wind_speed"] |
                          convert_mps_to_kph}} km/h</p>
                      </div>
                    </div>
                  </div>
                  <div class="columns is-vcentered ">
                    <div class="column is-half is-flex is-justify-content-right">
                      <figure class="image is-64x64">
                        <img
                          src="{{ url_for('static', filename='img/weather-icon/' + data['current']['weather'][0]['icon'] + '@2x.png') }}"
                          alt="Weather Icon" />
                      </figure>
                    </div>
                    <div class="column is-flex is-align-items-center is-justify-content-left">
                      <p class="has-text-centered">{{ data['current']['weather'][0]['description'] }}</p>
                    </div>
                  </div>
              </section>
              <div class="columns mt-3 has-background-link-dark">
                <p><strong class="div-text-medium has-text-white m-5">5-Days Forecast</strong></p>
              </div>
              <div class="columns has-background-link-light">
                <div class="column border-day">
                  <p><strong>Tomorrow</strong></p>
                  <div class="is-flex is-justify-content-center ">
                    <div class="image is-64x64">
                      <img
                        src="{{ url_for('static', filename='img/weather-icon/' + data['daily'][1]['weather'][0]['icon'] + '@2x.png') }}"
                        alt="Weather Icon" />
                    </div>
                  </div>
                  <div class="columns">
                    <div class="column is-half">
                      <p class="has-text-centered div-text-small">{{ data['daily'][1]['weather'][0]['description']
                        }}</p>
                    </div>
                    <div class="column is-flex is-align-items-center">
                      <p class="has-text-centered div-text-small">
                        {{data['daily'][1]['temp']['min']|round }}°/{{data['daily'][1]['temp']['max']|round }}°</p>
                    </div>
                  </div>
                </div>
                <div class="column border-day">
                  <p><strong>{{ data['daily'][2]['dt'] | format_datetime(data["timezone"], 'date') }}</strong></p>
                  <div class="is-flex is-justify-content-center ">
                    <div class="image is-64x64">
                      <img
                        src="{{ url_for('static', filename='img/weather-icon/' + data['daily'][2]['weather'][0]['icon'] + '@2x.png') }}"
                        alt="Weather Icon" />
                    </div>
                  </div>
                  <div class="columns">
                    <div class="column is-half ">
                      <p class="has-text-centered div-text-small">{{ data['daily'][2]['weather'][0]['description']
                        }}</p>
                    </div>
                    <div class="column is-flex is-align-items-center">
                      <p class="has-text-centered div-text-small">
                        {{data['daily'][2]['temp']['min']|round }}°/{{data['daily'][2]['temp']['max']|round }}°</p>
                    </div>
                  </div>
                </div>
                <div class="column border-day">
                  <p><strong>{{ data['daily'][3]['dt'] | format_datetime(data["timezone"], 'date') }}</strong></p>
                  <div class="is-flex is-justify-content-center ">
                    <div class="image is-64x64">
                      <img
                        src="{{ url_for('static', filename='img/weather-icon/' + data['daily'][3]['weather'][0]['icon'] + '@2x.png') }}"
                        alt="Weather Icon" />
                    </div>
                  </div>
                  <div class="columns">
                    <div class="column is-half">
                      <p class="has-text-centered div-text-small">{{ data['daily'][3]['weather'][0]['description']
                        }}</p>
                    </div>
                    <div class="column is-flex is-align-items-center">
                      <p class="has-text-centered div-text-small">
                        {{data['daily'][3]['temp']['min']|round }}°/{{data['daily'][3]['temp']['max']|round }}°</p>
                    </div>
                  </div>
                </div>
                <div class="column border-day">
                  <p><strong>{{ data['daily'][4]['dt'] | format_datetime(data["timezone"], 'date') }}</strong></p>
                  <div class="is-flex is-justify-content-center ">
                    <div class="image is-64x64">
                      <img
                        src="{{ url_for('static', filename='img/weather-icon/' + data['daily'][4]['weather'][0]['icon'] + '@2x.png') }}"
                        alt="Weather Icon" />
                    </div>
                  </div>
                  <div class="columns">
                    <div class="column is-half">
                      <p class="has-text-centered div-text-small">{{ data['daily'][4]['weather'][0]['description']
                        }}</p>
                    </div>
                    <div class="column is-flex is-align-items-center">
                      <p class="has-text-centered div-text-small">
                        {{data['daily'][4]['temp']['min']|round }}°/{{data['daily'][4]['temp']['max']|round }}°</p>
                    </div>
                  </div>
                </div>
                <div class="column">
                  <p><strong>{{ data['daily'][5]['dt'] | format_datetime(data["timezone"], 'date') }}</strong></p>
                  <div class="is-flex is-justify-content-center ">
                    <div class="image is-64x64">
                      <img
                        src="{{ url_for('static', filename='img/weather-icon/' + data['daily'][5]['weather'][0]['icon'] + '@2x.png') }}"
                        alt="Weather Icon" />
                    </div>
                  </div>
                  <div class="columns">
                    <div class="column is-half">
                      <p class="has-text-centered div-text-small">{{ data['daily'][5]['weather'][0]['description']
                        }}</p>
                    </div>
                    <div class="column is-flex is-align-items-center">
                      <p class="has-text-centered div-text-small">
                        {{data['daily'][5]['temp']['min']|round }}°/{{data['daily'][5]['temp']['max']|round }}°</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
      </section>
    </div>
  </div>

</div>
</div>


<!-- Settings view -->
<div class="is-hidden" id="settings-tab-content">
  <p class="mt-3" style="text-align:center;">Here will be the contents of the "Settings" tab</p>
</div>
</div>

<script>
  function switchToWeather() {
    removeActive();
    hideAll();
    $("#weather-tab").addClass("is-active");
    $("#weather-tab-content").removeClass("is-hidden");
  }

  function switchToSettings() {
    removeActive();
    hideAll();
    $("#settings-tab").addClass("is-active");
    $("#settings-tab-content").removeClass("is-hidden");
  }

  function removeActive() {
    $("li").each(function () {
      $(this).removeClass("is-active");
    });
  }

  function hideAll() {
    $("#weather-tab-content").addClass("is-hidden");
    $("#settings-tab-content").addClass("is-hidden");
  }

</script>


{% endblock %}